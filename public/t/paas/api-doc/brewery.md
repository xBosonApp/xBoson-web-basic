# 监视目录中的源代码

* 将修改保存到库中
* 可以查看源码的修改记录
* 可以还原到历史版本
* 不支持中文路径!
* 文本文件必须使用 utf8 编码
* 文件夹太复杂会导致性能变低


## Install

`npm install --save brewery-prj`


## Usage

两种使用方法

    1. 服务器模式 Server
    2. 命令行模式 Command


### Server

`npm start`

修改 config 后启动服务器, 服务器监视一个目录中文件的修改,
并把修改记录到代码库中, 通过导出的 URL 访问历史记录.

### /bry/list

参数: js=1 [可选, 设置这个参数则返回 json 数据, 下同]
功能: 列出历史库中所有文件

### /bry/hist

参数: js=1, f=文件名 [必填, 文件名是本地系统的绝对路径, 下同]
      fy=指定年 fm=指定月 fd=指定日, 三个参数都是可选的, 可以进行组合,
      年必须是 4 位数字, 月日必须是 2 位数字, 不足补 0.
功能: 列出指定文件的修改记录

### /bry/content

参数: js=1, f=文件名, d=日期 [可选, 仅用于显示用],
      i=索引 [必填, 历史记录的索引]
功能: 返回文件在指定历史索引处的文件内容


### Command [未实现]

`node index [l f i=x c d] [in-filename]`

[l f i c d] 选项不能同时存在,
当 base.db 已经丢失时, 命令可以恢复单独的修改历史文件.

l:  解析输入文件 in-filename,
    解出文件的最后修改内容, 输出文件名为 out.0, 
    如果 out.0 已经存在, 则输出 out.1

f:  输出文件的初始内容.

c:  检查修改历史文件中的历史次数.

i:  输出文件第 x 次修改的文件内容.

d:  这个参数中的 in-filename 是一个目录, 目录中有完整 base.db 和相关文件,
    把所有的最后修改文件输出到 out.0 目录