"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue-demi"),t=require("echarts/core"),n=require("resize-detector"),o=function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];var r={autoresize:Boolean};var a={loading:Boolean,loadingOptions:Object};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("x-vue-echarts{display:block;width:100%;height:100%}");var u=/^on[^a-z]/,c=function(e){return u.test(e)};e.Vue2&&e.Vue2.config.ignoredElements.push("x-vue-echarts");var s=e.defineComponent({name:"echarts",props:o(o({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},r),a),inheritAttrs:!1,created:function(){console.log(this)},setup:function(r,a){var u=a.attrs,s=a.listeners,l=e.shallowRef(),p=e.shallowRef(),f=e.shallowRef(),d=e.inject("ecTheme",null),v=e.inject("ecInitOptions",null),h=e.inject("ecUpdateOptions",{lazyUpdate:!0}),O=e.computed((function(){return f.value||r.option||Object.create(null)})),g=e.computed((function(){return r.theme||e.unref(d)||{}})),m=e.computed((function(){return r.initOptions||e.unref(v)||{}})),y=e.computed((function(){return r.updateOptions||e.unref(h)||{}})),E=e.toRefs(r),w=E.autoresize,x=E.manualUpdate,j=E.loading,L=e.toRef(r,"initOptions"),b=e.toRef(r,"loadingOptions"),U=e.computed((function(){return function(e){var t={};for(var n in e)c(n)||(t[n]=e[n]);return t}(u)}));function C(n){if(!p.value&&l.value){var o=p.value=t.init(l.value,g.value,m.value);r.group&&(o.group=r.group);var i=s;i||(i={},Object.keys(u).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);i[t]=u[e]}))),Object.keys(i).forEach((function(e){var t=i[e];t&&(0===e.indexOf("zr:")?o.getZr().on(e.slice(3).toLowerCase(),t):o.on(e.toLowerCase(),t))})),o.setOption(n||O.value,y.value),w.value&&e.nextTick((function(){if(o&&!o.isDisposed())try{o.resize()}catch(e){if("Cannot read property 'get' of undefined"===e.message)return;throw e}}))}}function T(){p.value&&(p.value.dispose(),p.value=void 0)}var D=null;e.watch(x,(function(t){"function"==typeof D&&(D(),D=null),t||(D=e.watch((function(){return r.option}),(function(e){e&&(p.value?p.value.setOption(e,y.value):C())}),{deep:!0}))}),{immediate:!0}),e.watch([g,L],(function(){T(),C()}),{deep:!0}),e.watchEffect((function(){r.group&&p.value&&(p.value.group=r.group)}));var R=function(e,t){function n(n){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(e.value||t(),!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,o)}}function r(e){return n(e)}return o(o({},(a=Object.create(null),i.forEach((function(e){a[e]=n(e)})),a)),{dispatchAction:r("dispatchAction"),getDataURL:r("getDataURL"),getConnectedDataURL:r("getConnectedDataURL")});var a}(p,C);return function(t,n,i){var r=e.inject("ecLoadingOptions",{}),a=e.computed((function(){return o(o({},e.unref(r)),null==i?void 0:i.value)}));e.watchEffect((function(){var e=t.value;e&&(n.value?e.showLoading(a.value):e.hideLoading())}))}(p,j,b),function(o,i,r,a){var u=null,c=0;function s(){var e=r.value;return e?e.offsetWidth*e.offsetHeight:0}e.watch([r,o,i],(function(e,o,i){var r=e[0],l=e[1],p=e[2];r&&l&&p&&(c=s(),u=t.throttle((function(){0===c?(l.setOption(Object.create(null),!0),l.resize(),l.setOption(a.value,!0)):l.resize(),c=s()}),100),n.addListener(r,u)),i((function(){u&&r&&(c=0,n.removeListener(r,u))}))}))}(p,w,l,O),e.onMounted((function(){r.option&&C()})),e.onUnmounted(T),o({chart:p,root:l,setOption:function(e,t){r.manualUpdate&&(f.value=e),p.value?p.value.setOption(e,t||{}):C(e)},nonEventAttrs:U},R)},render:function(){var t=o({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",e.h("x-vue-echarts",t)}});exports.INIT_OPTIONS_KEY="ecInitOptions",exports.LOADING_OPTIONS_KEY="ecLoadingOptions",exports.THEME_KEY="ecTheme",exports.UPDATE_OPTIONS_KEY="ecUpdateOptions",exports.default=s;
//# sourceMappingURL=index.cjs.min.js.map
