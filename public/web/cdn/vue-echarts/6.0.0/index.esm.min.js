import{watch as e,inject as t,computed as n,unref as o,watchEffect as i,defineComponent as r,shallowRef as a,toRefs as u,toRef as c,onMounted as s,onUnmounted as l,h as p,Vue2 as f,nextTick as v}from"vue-demi";import{throttle as d,init as h}from"echarts/core";import{addListener as g,removeListener as O}from"resize-detector";var m=function(){return(m=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];var b={autoresize:Boolean},x="ecLoadingOptions";var L={loading:Boolean,loadingOptions:Object};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("x-vue-echarts{display:block;width:100%;height:100%}");var j=/^on[^a-z]/,C=function(e){return j.test(e)};f&&f.config.ignoredElements.push("x-vue-echarts");var U="ecTheme",z="ecInitOptions",D="ecUpdateOptions",E=r({name:"echarts",props:m(m({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},b),L),inheritAttrs:!1,created:function(){console.log(this)},setup:function(r,p){var f=p.attrs,b=p.listeners,x=a(),L=a(),j=a(),U=t("ecTheme",null),z=t("ecInitOptions",null),D=t("ecUpdateOptions",{lazyUpdate:!0}),E=n((function(){return j.value||r.option||Object.create(null)})),w=n((function(){return r.theme||o(U)||{}})),A=n((function(){return r.initOptions||o(z)||{}})),R=n((function(){return r.updateOptions||o(D)||{}})),T=u(r),B=T.autoresize,P=T.manualUpdate,S=T.loading,k=c(r,"initOptions"),H=c(r,"loadingOptions"),I=n((function(){return function(e){var t={};for(var n in e)C(n)||(t[n]=e[n]);return t}(f)}));function N(e){if(!L.value&&x.value){var t=L.value=h(x.value,w.value,A.value);r.group&&(t.group=r.group);var n=b;n||(n={},Object.keys(f).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);n[t]=f[e]}))),Object.keys(n).forEach((function(e){var o=n[e];o&&(0===e.indexOf("zr:")?t.getZr().on(e.slice(3).toLowerCase(),o):t.on(e.toLowerCase(),o))})),t.setOption(e||E.value,R.value),B.value&&v((function(){if(t&&!t.isDisposed())try{t.resize()}catch(e){if("Cannot read property 'get' of undefined"===e.message)return;throw e}}))}}function W(){L.value&&(L.value.dispose(),L.value=void 0)}var F=null;e(P,(function(t){"function"==typeof F&&(F(),F=null),t||(F=e((function(){return r.option}),(function(e){e&&(L.value?L.value.setOption(e,R.value):N())}),{deep:!0}))}),{immediate:!0}),e([w,k],(function(){W(),N()}),{deep:!0}),i((function(){r.group&&L.value&&(L.value.group=r.group)}));var Z=function(e,t){function n(n){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(e.value||t(),!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,o)}}function o(e){return n(e)}return m(m({},(i=Object.create(null),y.forEach((function(e){i[e]=n(e)})),i)),{dispatchAction:o("dispatchAction"),getDataURL:o("getDataURL"),getConnectedDataURL:o("getConnectedDataURL")});var i}(L,N);return function(e,r,a){var u=t("ecLoadingOptions",{}),c=n((function(){return m(m({},o(u)),null==a?void 0:a.value)}));i((function(){var t=e.value;t&&(r.value?t.showLoading(c.value):t.hideLoading())}))}(L,S,H),function(t,n,o,i){var r=null,a=0;function u(){var e=o.value;return e?e.offsetWidth*e.offsetHeight:0}e([o,t,n],(function(e,t,n){var o=e[0],c=e[1],s=e[2];o&&c&&s&&(a=u(),r=d((function(){0===a?(c.setOption(Object.create(null),!0),c.resize(),c.setOption(i.value,!0)):c.resize(),a=u()}),100),g(o,r)),n((function(){r&&o&&(a=0,O(o,r))}))}))}(L,B,x,E),s((function(){r.option&&N()})),l(W),m({chart:L,root:x,setOption:function(e,t){r.manualUpdate&&(j.value=e),L.value?L.value.setOption(e,t||{}):N(e)},nonEventAttrs:I},Z)},render:function(){var e=m({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",p("x-vue-echarts",e)}});export default E;export{z as INIT_OPTIONS_KEY,x as LOADING_OPTIONS_KEY,U as THEME_KEY,D as UPDATE_OPTIONS_KEY};
//# sourceMappingURL=index.esm.min.js.map
