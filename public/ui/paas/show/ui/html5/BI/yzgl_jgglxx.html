<style>
.choose-c{ line-height: 30px;}
.choose-c input{ float: left;margin:9px 0 0 0;}
.choose-c span{ float: left; margin:0 10px 0 0;}
</style>
<div id="mrmzl-m" class="portlet box grey">
    <div class="portlet-title">
        <div class="caption" id="yetj-name"><!-- 可以设置图标<i class="icon-globe"></i> -->机构基础信息</div> 
        <div style="float:right;">
              <i onclick="dayin()" class="icon-print" style="cursor:pointer"></i>
        </div>
    </div>
    <div class="portlet-body">
        <div class="lc-inquire">
            <form id="org-mrmzl" class="form-inline" action="">
                <input type="hidden" id="groupby" value="tablename"/>
                <input type="hidden" id="pagenum"/>
                <input type="hidden" id="pagesize"/>
                <div class="row-fluid">
                    <div class="span1">机构</div>
                    <div class="span2"><select id="dimorg" class="selectpicker"><option value="All">全部</option></select></div>
                    <div class="span1">开始时间</div>
                    <div class="span2"><input id="datebegin" type="text" class="dateday"></div>
                    <div class="span1">结束时间</div>
                    <div class="span2"><input id="dateend" type="text"  class="dateday"></div>
                    <div class="span1"><a onclick="setData101New('tablename')" class="btn blue">查询</a></div>
                    <div class="span1"><input id="checkedyes" name="" type="checkbox" value="" checked="checked" style="float:left;width:auto;margin:9px 0 0 14px;"  /><span style="float:left;">全选</span></div>
            </div>
            </form>
            <div id="zb_z" class="choose-c">
				<input id="zb1" name="" type="checkbox" value="" checked="checked" /><span>机构</span>
				<input id="zb2" name="" type="checkbox" value="" checked="checked" /><span>人员总数</span>
				<input id="zb3" name="" type="checkbox" value="" checked="checked" /><span>编制数</span>
				<input id="zb4" name="" type="checkbox" value="" checked="checked" /><span>卫生技术人员</span>
				<input id="zb5" name="" type="checkbox" value="" checked="checked" /><span>编制床位</span>
				<input id="zb6" name="" type="checkbox" value="" checked="checked" /><span>实有床位</span>
				<input id="zb7" name="" type="checkbox" value="" checked="checked" /><span>实际开放总床日数</span>
				<input id="zb8" name="" type="checkbox" value="" checked="checked" /><span>实际占用总床日数</span>
				<input id="zb9" name="" type="checkbox" value="" checked="checked" /><span>万元以上设备总价值（万元）</span>
				<input id="zb10" name="" type="checkbox" value="" checked="checked" /><span>万元以上设备台数</span><br />
				<input id="zb11" name="" type="checkbox" value="" checked="checked" /><span>门急诊人次数</span>
				<input id="zb12" name="" type="checkbox" value="" checked="checked" /><span>其中</span>
				<input id="zb13" name="" type="checkbox" value="" checked="checked" /><span>门诊处方总数</span>
				<input id="zb14" name="" type="checkbox" value="" checked="checked" /><span>其中</span>
				<input id="zb15" name="" type="checkbox" value="" checked="checked" /><span>转诊人次数</span>
				<input id="zb16" name="" type="checkbox" value="" checked="checked" /><span>其中</span>
				<input id="zb17" name="" type="checkbox" value="" checked="checked" /><span>住院人数</span>
				<input id="zb18" name="" type="checkbox" value="" checked="checked" /><span>死亡人数</span>
				<input id="zb19" name="" type="checkbox" value="" checked="checked" /><span>进修培训人次数</span>
				<input id="zb20" name="" type="checkbox" value="" checked="checked" /><span>开展哪些中医适宜技术项目（文字描述）</span>
				<div style="clear:both;"></div>
            </div>
        </div>
        <div id="rowtable" class="row-fluid">
            <div class="span12">
                 <table id="ttmrmzl"></table>
            </div>
        </div>
        
        
        
    </div>
</div>


<script type="text/javascript">
function dayin(){
$("#rowtable").printArea();
}
$(document).ready(function(){
  //全选
$("#checkedyes").click(function(){
  if ($("#checkedyes").is(":checked")) {
      	$("#zb_z input").prop("checked",true);
      	$('#ttmrmzl').datagrid('showColumn', "机构");
		$('#ttmrmzl').datagrid('showColumn', "人员总数");
		$('#ttmrmzl').datagrid('showColumn', "编制数");
		$('#ttmrmzl').datagrid('showColumn', "卫生技术人员");
		$('#ttmrmzl').datagrid('showColumn', "编制床位");
		$('#ttmrmzl').datagrid('showColumn', "实有床位");
		$('#ttmrmzl').datagrid('showColumn', "实际开放总床日数");
		$('#ttmrmzl').datagrid('showColumn', "实际占用总床日数");
		$('#ttmrmzl').datagrid('showColumn', "万元以上设备总价值（万元）");
		$('#ttmrmzl').datagrid('showColumn', "万元以上设备台数");
		$('#ttmrmzl').datagrid('showColumn', "门急诊人次数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(11)').show();
		$('#ttmrmzl').datagrid('showColumn', "中医诊疗人次数");
		$('#ttmrmzl').datagrid('showColumn', "门诊处方总数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(13)').show();
		$('#ttmrmzl').datagrid('showColumn', "使用抗生素处方数");
		$('#ttmrmzl').datagrid('showColumn', "中医处方数（基本信息）");
		$('#ttmrmzl').datagrid('showColumn', "转诊人次数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(15)').show();
		$('#ttmrmzl').datagrid('showColumn', "上级医院向下转诊人次数");
		$('#ttmrmzl').datagrid('showColumn', "向上级医院转诊人次数");
		$('#ttmrmzl').datagrid('showColumn', "中医治未病服务人次数");
		$('#ttmrmzl').datagrid('showColumn', "住院人数");
		$('#ttmrmzl').datagrid('showColumn', "死亡人数");
		$('#ttmrmzl').datagrid('showColumn', "进修培训人次数");
		$('#ttmrmzl').datagrid('showColumn', "开展哪些中医适宜技术项目（文字描述）");
    }else{
      $("#zb_z input").prop("checked",false);
      $('#ttmrmzl').datagrid('hideColumn', "机构");
		$('#ttmrmzl').datagrid('hideColumn', "人员总数");
		$('#ttmrmzl').datagrid('hideColumn', "编制数");
		$('#ttmrmzl').datagrid('hideColumn', "卫生技术人员");
		$('#ttmrmzl').datagrid('hideColumn', "编制床位");
		$('#ttmrmzl').datagrid('hideColumn', "实有床位");
		$('#ttmrmzl').datagrid('hideColumn', "实际开放总床日数");
		$('#ttmrmzl').datagrid('hideColumn', "实际占用总床日数");
		$('#ttmrmzl').datagrid('hideColumn', "万元以上设备总价值（万元）");
		$('#ttmrmzl').datagrid('hideColumn', "万元以上设备台数");
		$('#ttmrmzl').datagrid('hideColumn', "门急诊人次数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(11)').hide();
		$('#ttmrmzl').datagrid('hideColumn', "中医诊疗人次数");
		$('#ttmrmzl').datagrid('hideColumn', "门诊处方总数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(13)').hide();
		$('#ttmrmzl').datagrid('hideColumn', "使用抗生素处方数");
		$('#ttmrmzl').datagrid('hideColumn', "中医处方数（基本信息）");
		$('#ttmrmzl').datagrid('hideColumn', "转诊人次数");
		$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(15)').hide();
		$('#ttmrmzl').datagrid('hideColumn', "上级医院向下转诊人次数");
		$('#ttmrmzl').datagrid('hideColumn', "向上级医院转诊人次数");
		$('#ttmrmzl').datagrid('hideColumn', "中医治未病服务人次数");
		$('#ttmrmzl').datagrid('hideColumn', "住院人数");
		$('#ttmrmzl').datagrid('hideColumn', "死亡人数");
		$('#ttmrmzl').datagrid('hideColumn', "进修培训人次数");
		$('#ttmrmzl').datagrid('hideColumn', "开展哪些中医适宜技术项目（文字描述）");	
    };
});


	//单位
	$("#zb1").click(function(){
		if ($("#zb1").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "机构");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "机构");
   			};
	});
	//人员总数
	$("#zb2").click(function(){
		if ($("#zb2").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "人员总数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "人员总数");
   			};
	});
	//编制数
	$("#zb3").click(function(){
		if ($("#zb3").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "编制数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "编制数");
   			};
	});
	//卫生技术人员
	$("#zb4").click(function(){
		if ($("#zb4").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "卫生技术人员");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "卫生技术人员");
   			};
	});
	//编制床位
	$("#zb5").click(function(){
		if ($("#zb5").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "编制床位");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "编制床位");
   			};
	});
	//实有床位
	$("#zb6").click(function(){
		if ($("#zb6").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "实有床位");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "实有床位");
   			};
	});
	//实际开放总床日数
	$("#zb7").click(function(){
		if ($("#zb7").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "实际开放总床日数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "实际开放总床日数");
   			};
	});
	//实际占用总床日数
	$("#zb8").click(function(){
		if ($("#zb8").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "实际占用总床日数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "实际占用总床日数");
   			};
	});
	//万元以上设备总价值（万元）
	$("#zb9").click(function(){
		if ($("#zb9").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "万元以上设备总价值（万元）");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "万元以上设备总价值（万元）");
   			};
	});
	//万元以上设备台数 
	$("#zb10").click(function(){
		if ($("#zb10").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "万元以上设备台数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "万元以上设备台数");
   			};
	});
	//门急诊人次数
	$("#zb11").click(function(){
		if ($("#zb11").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "门急诊人次数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "门急诊人次数");
   			};
	});
	//门急诊人次数-------其中
	$("#zb12").click(function(){
		if ($("#zb12").is(":checked")) {
				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(11)').show();
   				$('#ttmrmzl').datagrid('showColumn', "中医诊疗人次数");
   			}else{
   				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(11)').hide();
   				$('#ttmrmzl').datagrid('hideColumn', "中医诊疗人次数");
   			};
	});
	//门诊处方总数
	$("#zb13").click(function(){
		if ($("#zb13").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "门诊处方总数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "门诊处方总数");
   			};
	});
	//门诊处方总数-------其中
	$("#zb14").click(function(){
		if ($("#zb14").is(":checked")) {
				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(13)').show();
   				$('#ttmrmzl').datagrid('showColumn', "使用抗生素处方数");
   				$('#ttmrmzl').datagrid('showColumn', "中医处方数（基本信息）");
   			}else{
   				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(13)').hide();
   				$('#ttmrmzl').datagrid('hideColumn', "使用抗生素处方数");
   				$('#ttmrmzl').datagrid('hideColumn', "中医处方数（基本信息）");
   			};
	});
	//转诊人次数
	$("#zb15").click(function(){
		if ($("#zb15").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "转诊人次数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "转诊人次数");
   			};
	});
	//转诊人次数-------其中
	$("#zb16").click(function(){
		if ($("#zb16").is(":checked")) {
				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(15)').show();
   				$('#ttmrmzl').datagrid('showColumn', "上级医院向下转诊人次数");
   				$('#ttmrmzl').datagrid('showColumn', "向上级医院转诊人次数");
   				$('#ttmrmzl').datagrid('showColumn', "中医治未病服务人次数");
   			}else{
   				$('.datagrid-view2 .datagrid-header-row:eq(0) td:eq(15)').hide();
   				$('#ttmrmzl').datagrid('hideColumn', "上级医院向下转诊人次数");
   				$('#ttmrmzl').datagrid('hideColumn', "向上级医院转诊人次数");
   				$('#ttmrmzl').datagrid('hideColumn', "中医治未病服务人次数");
   			};
	});
	//住院人数 
	$("#zb17").click(function(){
		if ($("#zb17").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "住院人数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "住院人数");
   			};
	});
	//死亡人数  
	$("#zb18").click(function(){
		if ($("#zb18").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "死亡人数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "死亡人数");
   			};
	});
	//进修培训人次数   
	$("#zb19").click(function(){
		if ($("#zb19").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "进修培训人次数");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "进修培训人次数");
   			};
	});
	//开展哪些中医适宜技术项目（文字描述）   
	$("#zb20").click(function(){
		if ($("#zb20").is(":checked")) {
   				$('#ttmrmzl').datagrid('showColumn', "开展哪些中医适宜技术项目（文字描述）");
   			}else{
   				$('#ttmrmzl').datagrid('hideColumn', "开展哪些中医适宜技术项目（文字描述）");
   			};
	});



});


/*function hahaha(){
	alert("---------------")
	$('#ttmrmzl').datagrid('hideColumn', "机构");
}*/

function setData101(data){
	$(".loadshow").show();  //--------------------------------------------------20140312
	var url ="XXDC001"; 
	var itemsList;
	if($("#datebegin").val()!=""&&$("#dateend").val()!=""){
		itemsList=["datebegin","dateend","dimorg"];
	}else{
		itemsList=[];
	}
	//空数据 会出现 小bug
	var info= new Map();
	info.put("sqlid","select");
	info.put("pagenum",PageNumber);
	info.put("pagesize",PageSize);
	if(data==="tablename"){
	   LXtype="tablename";
	}else if(data==="createdate"){
	   LXtype="createdate";
	}else{
	   LXtype="hospunitorgcode"
	}
	info.put("groupby",data);
	sys_AjaxGet(BIASUrl+url,"org-mrmzl","reCallback1011",info,itemsList);
	

}
</script>
<script type="text/javascript">
var dataShow;
var PageNumber=1;
var PageSize=10;
function loadingmrmzl(){

	$("#pagenum").val(PageNumber);
  	$("#pagesize").val(PageSize);
	var mapInfo = new Map();
	mapInfo.put("sqlid","select");
	mapInfo.put("pagenum",PageNumber);
	mapInfo.put("pagesize",PageSize);
	var itemsList;
	//itemsList = [];
	if($("#datebegin").val()==""&&$("#dateend").val()==""){
		itemsList=["groupby"];
	}else{
		itemsList = ["datebegin","dateend","dimorg"];
	}
	var url = "XXDC001";
	//sys_AjaxGet(BIASUrl+url,"org",mapInfo,itemsList);
	sys_AjaxGet(BIASUrl+url,"org-mrmzl","reCallback1011",mapInfo,itemsList);
	
}
function reCallback1011(dataInfo){
	if(dataInfo.ret=="103"){
        alert("用户登录超时，请重新登陆！");
        $('#trigger').scojs_modal();
    }
if(dataInfo.dataMap.dataAll==""){
alert("暂无数据！")
}else{
//将dataAll添加到数据里面
var datapush=dataInfo.dataMap.data;
dataInfo.dataMap.dataAll[0].机构="合计";
datapush.push(dataInfo.dataMap.dataAll[0]);
//	dataShow=dataInfo;
//var retdata = dataInfo.dataMap==null?null:dataInfo.dataMap.data;
	$('#ttmrmzl').datagrid({
			nowrap: false,
			striped: true,
			collapsible:false,
			//pagination:true,
			pageNumber:PageNumber,
			pageSize: PageSize,
			singleSelect:true, 
			loadMsg:"正在载入...",
			pageList: [10,20,50,100,200],
			data:dataInfo.dataMap.data,
			frozenColumns:[[
		        {field:'机构',title:'机构',align:'center',rowspan:12,width:200},
		      ]],
			columns:[[
			{field:'机构1',title:'机构',align:'center',rowspan:12,width:200},
			{field:'人员总数',title:'人员总数',align:'center',rowspan:12,width:100},
			{field:'编制数',title:'编制数',align:'center',rowspan:12,width:100},
			{field:'卫生技术人员',title:'卫生技术人员',align:'center',rowspan:12,width:100},
			{field:'编制床位',title:'编制床位',align:'center',rowspan:12,width:100},
			{field:'实有床位',title:'实有床位',align:'center',rowspan:12,width:100},
			{field:'实际开放总床日数',title:'实际开放总床日数',align:'center',rowspan:12,width:120},
			{field:'实际占用总床日数',title:'实际占用总床日数',align:'center',rowspan:12,width:120},
			{field:'万元以上设备总价值（万元）',title:'万元以上设备总价值（万元）',align:'center',rowspan:12,width:160},
			{field:'万元以上设备台数',title:'万元以上设备台数',align:'center',rowspan:12,width:150},
			{field:'门急诊人次数',title:'门急诊人次数',align:'center',rowspan:12,width:100},
			{title:'其中',align:'center',colspan:1,width:100},
			{field:'门诊处方总数',title:'门诊处方总数',align:'center',rowspan:12,width:100},
			{title:'其中',align:'center',colspan:2,width:100},
			{field:'转诊人次数',title:'转诊人次数',align:'center',rowspan:12,width:100},
			{title:'其中',align:'center',colspan:3,width:100},
			{field:'住院人数',title:'住院人数',align:'center',rowspan:12,width:100},
			{field:'死亡人数',title:'死亡人数',align:'center',rowspan:12,width:100},
			{field:'进修培训人次数',title:'进修培训人次数',align:'center',rowspan:12,width:100},
			{field:'开展哪些中医适宜技术项目（文字描述）',title:'开展哪些中医适宜技术项目（文字描述）',align:'center',rowspan:12,width:250},



			],[
			{field:'中医诊疗人次数',title:'中医诊疗人次数',align:'center',rowspan:3,width:100},
			{field:'使用抗生素处方数',title:'使用抗生素处方数',align:'center',rowspan:3,width:120},
			{field:'中医处方数（基本信息）',title:'中医处方数',align:'center',rowspan:3,width:100},
			{field:'上级医院向下转诊人次数',title:'上级医院向下转诊人次数',align:'center',rowspan:3,width:150},
			{field:'向上级医院转诊人次数',title:'向上级医院转诊人次数',align:'center',rowspan:3,width:150},
			{field:'中医治未病服务人次数',title:'中医治未病服务人次数',align:'center',rowspan:3,width:150}

			]],


			onDblClickRow: function (rowIndex) {
				// openRoleDiv(rowIndex);
			},
		   fitColumns:false,
		   rownumbers:false
	}); 
   var pager = $('#ttmrmzl').datagrid('getPager');
	   if(pager){
		$(pager).pagination({
			
			onSelectPage:function(pageNumber,pageSize){
			   PageNumber=pageNumber;
			   PageSize=pageSize;
			   loadingmrmzl();
			}
		});		
		$(pager).pagination({pageSize:PageSize,pageNumber:PageNumber,total:dataInfo.count});
	};
//删除新增的dataAll	
datapush.splice(datapush.length-1);
$('#ttmrmzl').datagrid('hideColumn', "机构1");
}



}
</script>
<script>
$(function(){
$(window).resize(function(){
$('#ttmrmzl').datagrid('resize');
});
});
</script>
<script>

$(function(){



	
//日期控件
$('.dateday').datetimepicker({
		format: 'yyyy-mm-dd',
		autoclose:true,
		startView:2,
		minView:2
	});
//获取当前年-月-日
today=new Date();
var ymd=sys_FormatYMD(today);
var vMon = today.getMonth() + 1;
var dateendymd=today.getFullYear()-1+"-"+(vMon<10 ? "0" + vMon : vMon)+"-"+today.getDate();
$("#datebegin").val(dateendymd);
$("#dateend").val(ymd); 

$("#mrmzl-m .reload").click(function(){
	$("#mrmzl-m #rowtable").toggleClass("rowtable");
	$("#mrmzl-m #lc-rowtable").toggleClass("rowtable");
	});

})
//机构
$(function () {
getselectdaoid101();
//getselectdimcv101();
});
function  getselectdaoid101(){
	//复制  开始
    sys_BI_getDaoidList("mdmSelectdaoid101");
	//复制  结束
}
function mdmSelectdaoid101(){
  var info = new Map();
  info.put("key",["hospunitorgcode"]);
  info.put("value",["hospunitorgnm"]);
  //复制  开始
  sys_GetSelect("org-mrmzl","dimorg",info,sys_BI_getCacheDaoidData());
  //复制  结束
}

loadingmrmzl();

</script>
