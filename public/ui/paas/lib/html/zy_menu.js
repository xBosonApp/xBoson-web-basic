zyMenu=function(){var r,h=e.prototype;function e(e){return zy.log("new zyMenu(options, el)"),(r=this).el=e,this}return h.Init=function(i){r.destroy();zy.g.am.app="ZYAPP_LOGIN",zy.g.am.mod="ZYMODULE_LOGIN",zy.net.get("api/orgmenu",function(e){if(e){if(0<e.result.length){h.menuView(e.result,$(r.el)),checkURL();var a=location.hash.replace(/^#/,"");if(0<$('nav a[href="'+a+'"]').length)$('nav a[href="'+a+'"]').parents("li.active").addClass("open");else{var n=$("nav > ul > li:first-child > a");-1!=n.attr("href").indexOf("home")?window.location.hash=n.attr("href"):window.location.hash="emptyhome.html"}$(r.el).jarvismenu({accordion:!0,speed:$.menu_speed,closedSign:'<em class="fa fa-chevron-right"></em>',openedSign:'<em class="fa fa-chevron-down"></em>'})}else window.location.hash="emptyhome.html",zy.ui.msg("错误","菜单项不存在","e");"function"==typeof i&&i()}})},h.destroy=function(){zy.log("menu  destroy"),$(r.el).empty()},h.menuView=function(e,a){var n=$("<ul></ul>");for(var i in e=e.sort(function(e,a){return Number(e.sorting_order)-Number(a.sorting_order)})){var r=e[i].menu_icon;r=r?'<i class="fa fa-lg fa-fw '+r+'"></i>':"";var t=e[i].children;if(0<$(t).length){var o=$("<li></li>");o.append('<a href="#">'+r+'<span class="menu-item-parent">'+e[i].menunm+"</span></a>"),h.menuView(t,o),n.append(o)}else{var s=e[i].uri||"";if("1"==e[i].appflag)n.append("<li><a href=# onclick=JavaScript:add_iframe(this) uri="+s.replace(/(\/$)/g,"")+">"+r+'<span class="menu-item-parent">'+e[i].menunm+"</span></a></li>");else{var l=/^paas\/emptymain.html#/;if(l.test(s))var p=s.replace(l,""),m=s.match(/^paas/);else{var u=s.split("/"),c=(m=u[0]+"/"+u[1],[]);for(var f in u)1<f&&c.push(u[f]);p=c.join("/")}n.append("<li><a href="+p+" path="+m+">"+r+'<span class="menu-item-parent">'+e[i].menunm+"</span></a></li>")}}n.appendTo(a)}},e}();