var dyTable=function(_,z){var D={api:function(a,t){_.g.am.app=a.app||"d2c8511b47714faba5c71506a5029d94",_.g.am.mod=a.mod,_.net.get("api/"+a.api,function(a){t&&t(a)},a.r_param,a.page)},label:function(a){return z("<"+a+"></"+a+">")}},P={dict_org:""};function j(){this.tableC=function(){var a=D.label("table");return a.addClass("table table-bordered table-striped"),a},this.pageC=function(){return D.label("div").addClass("row")}}function R(a){a.removeClass(),a.empty()}function i(y){return function(a,t,e,i,n,r,s){if(!a)return _.ui.msg("提示","缺少容器","w");P.dict_org=s||_.g.comm.org;var d,o,g,f,v,b,h,l=new j,c=l.tableC(),u=l.pageC();R(a),R(z(a.next()[0])),a.addClass("dataTables_wrapper"),a.append(c),a.after(u),d=u,o=c,g=t,f=e,v=y,b=!0,h=a,z.jqPaginator(d,{totalCounts:1,pageSize:_.g.page.pagesize,currentPage:1,onPageChange:function(a){var e,i,l,t,c,n,u,p;e=a,i=d,l=o,t=g,c=f,n=v,u=b,p=h,D.api({api:n.api,app:n.app,mod:n.mod,page:e,r_param:t},function(a){var n,r,s,d,o,t=Number(a.count);0<=t&&0<=a.data.length&&0<a.type.length?(n=l,s=c,d=u,o=p,function(a,t){var e="";if(z.each(a,function(a,t){""!=t.dict&&(e+=t.dict+",")}),""==(e=e.trimCom()))return t&&t();_.org.cache.initDicts(e,P.dict_org,function(){t&&t()})}((r=a).type,function(){var a,e,i,t={data:r.data,columns:(a=r.type,e=[],z.each(a,function(a,d){if("0"===d.view)return!0;var t={};t.title=d.cn,t.render=function(a,t,e,i){var n="black";if(e.status&&"0"==e.status&&(n="red"),""==d.dict||null==d.dict){var r=30<(s=null==e[d.en]?"":e[d.en]).length?s.substr(0,27)+"...":s;return'<div style="color:'+n+';" title="'+s+'">'+r+"</div>"}var s=null==e[d.en]?"":e[d.en];return r=null!=(s=_.org.cache.cd2name(d.dict,s,P.dict_org))&&30<s.length?s.substr(0,27)+"...":s,'<div style="color:'+n+';" title="'+s+'">'+r+"</div>"},e.push(t)}),e)};z.extend(t,_.ui.dataTable),d?(n.dataTable(t),(i=o).unbind("resize").bind("resize",function(){var a=i.find(".dataTables_scrollBody").width(),t=i.find(".dataTables_scrollBody table").width();t<=a&&(i.find(".dataTables_scrollHeadInner").css("width","100%"),i.find(".dataTables_scrollBody table").css("width","100%"),i.find(".dataTables_scrollHeadInner table").css("width","100%"))}),d=!1):n.dataTable(t),s&&s(r,n)}),t>=_.g.page.pagesize?i.jqPaginator("option",{totalCounts:t,pageSize:_.g.page.pagesize,currentPage:e}):i.jqPaginator("destroy")):i.jqPaginator("destroy")})}});var p,m,w,C,T=(m=i,w=n,C=r,(p=c).on("click","tr",function(a){if(z(this).find("th").is("th")||z(this).find("td").hasClass("dataTables_empty"))return!1;if(!z(this).find("div").hasClass("popover")&&z(this).hasClass("active"))z(this).removeClass("active"),C?0==z(this).siblings("tr.active").length&&w&&w():w&&w();else if(C){z(this).addClass("active");var t=[];p.find("tr.active").each(function(){var a=p.DataTable().row(z(this)).data();t.push(a)}),m&&m(t)}else p.DataTable().$("tr.active").removeClass("active"),z(this).addClass("active"),m&&m(p.DataTable().row(".active").data())}),{SetRow:function(a){var t=p.DataTable().row(".active").data();z.extend(t,a),"1"===t.status?t.statusnm="有效":t.statusnm="无效",p.DataTable().rows().invalidate().draw()},GetRow:function(){var a=p.DataTable().row(".active").data();if(a)return a}});return{setrow:T.SetRow,getrow:T.GetRow}}}return function(a,t){var e;((e=a)?e.app?e.api?e.mod||_.ui.msg("提示","mod异常","w"):_.ui.msg("提示","api异常","w"):_.ui.msg("提示","app异常","w"):_.ui.msg("提示","初始化失败","w"))&&(this.init=i(a),_.cache.initDicts("ZR.0001",function(){t&&t({init:i(a)})}))}}(zy,jQuery);