var rbac_prj_mgt07_cache={},rbac_prj_mgt09_cache={},rbac_prj_mgt11_cache={};!function(){var m={prjappmaint:{add:[{name:"应用名称",type:"input",id:"appnm",write:!0,width:6},{name:"应用状态",type:"select2",id:"status",write:!0,width:6},{name:"应用说明",type:"textarea",id:"about",write:!0,width:12}],edit:[{name:"应用ID",id:"appid",type:"input",write:!1,width:6},{name:"应用名称",type:"input",write:!0,id:"appnm",width:6},{name:"应用状态",type:"select2",id:"status",write:!0,width:6},{name:"创建时间",type:"input",id:"createdt",write:!1,width:6},{name:"修改时间",type:"input",id:"updatedt",write:!1,width:6},{name:"应用说明",type:"textarea",id:"about",write:!0,width:12}]},prjmodmaint:{add:[{name:"业务ID",id:"moduleid",type:"input",write:!0,width:6},{name:"业务名称",type:"input",id:"modulenm",write:!0,width:6},{name:"业务状态",id:"status",type:"select2",write:!0,width:6},{name:"业务说明",type:"textarea",id:"about",write:!0,width:12}],edit:[{name:"业务ID",type:"input",id:"moduleid",write:!1,width:6},{name:"业务名称",type:"input",id:"modulenm",write:!0,width:6},{name:"业务状态",type:"select2",id:"status",write:!0,width:6},{name:"创建时间",type:"input",id:"createdt",write:!1,width:6},{name:"修改时间",type:"input",id:"updatedt",write:!1,width:6},{name:"业务说明",type:"textarea",id:"about",write:!0,width:12}]},prjapimaint:{add:[{name:"API ID",id:"apiid",type:"input",write:!0,width:6},{name:"API 名称",id:"apinm",type:"input",write:!0,width:6},{name:"API 状态",type:"select2",id:"status",write:!0,width:6}],edit:[{name:"API ID",type:"input",id:"apiid",write:!1,width:6},{name:"API 名称",type:"input",id:"apinm",write:!0,width:6},{name:"API 状态",id:"status",type:"select2",write:!0,width:6},{name:"创建时间",id:"createdt",type:"input",write:!1,width:6},{name:"修改时间",id:"updatedt",type:"input",write:!1,width:6}]}},l="rbac/prj_mgt/rbac_prj_mgt02.htm",t="rbac/prj_mgt/rbac_prj_mgt03.htm",u="rbac/prj_mgt/rbac_prj_mgt05.htm",f="rbac/prj_mgt/rbac_prj_mgt06.htm",r="rbac/prj_mgt/rbac_prj_mgt04.htm",o="rbac/prj_mgt/rbac_prj_mgt07.htm",c="rbac/prj_mgt/rbac_prj_mgt11.htm";function p(n,f){function d(p,s,m){function t(e){s.find("#empty").hide();var t;if(!$.isArray(e))return null;var a=s.find(".ztree");var i,n,d,r,o,l=(i=[],n={},d={},$.each(e,function(e,t){n[t.id]=t}),$.each(e,function(e,t){3==t.id.split("--").length&&function e(t){d[t.id]||(i.push(t),d[t.id]=!0,n[t.pid]&&e(n[t.pid]))}(t)}),i),c=!0;t=$.fn.zTree.init(a,{view:{dblClickExpand:!1},data:{key:{name:"name",title:"id"},simpleData:{enable:!0,idKey:"id",pIdKey:"pid"}},check:{enable:!0,chkDisabledInherit:!0,chkStyle:"checkbox",chkboxType:{Y:"ps",N:"ps"}}},l),0===l.length&&(s.find("#empty").show(),c=!1),r=t,o=c,s.find("[name=submit]").unbind("click").click(function(e){var t=r.getNodesByFilter(function(e){return 2==e.level&&e.checked});0<t.length?zy.extend.get({app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"yyxxgl",apinm:u[p].editApi},function(e){zy.extend.msg("成功","s"),h(m,{name:"appnm",title:"showid"},null,f),s.find(".modal").modal("hide")},{roleid:f.roleid,nodesRes:$.map(t,function(e){return e.id}).join(",")}):o?zy.extend.msg("请至少选择一个API","i"):s.find(".modal").modal("hide")})}if(!p)return null;var u={app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL",up:{treeApi:"prjapiuptree",editApi:zy.fix_api_name("api_manage_up"),title:"待上线"},down:{treeApi:"prjapidowntree",editApi:"api_manage_down",title:"待下线"},redit:{treeApi:"prjapidevtree",editApi:"api_manage_dev",title:"待转开发"}};s.find("h4").html(u[p].title),zy.extend.post({app:u.app,mod:u.mod,apinm:u[p].treeApi},function(e){t(e.result)},{prjid:f.prjid})}n.find("#edit_project").click(function(e){zy.net.loadHTML(t,$("#modal_container"),function(){var t=$("#modal_container").find(".modal");t.find(".modal-title").html("修改项目"),zy.cache.initDicts("ZR.0001",function(){var e=t.find("input[name=status]");e.zySelect("ZR.0001",!1,{allowClear:!1,width:"100%"}),e.select2("val","1"),t.find("form").json2form(f),t.find("input[name=prj_path]").prop("readonly",!0)}),t.find("[name=add]").unbind("click").click(function(e){zy.extend.get({apinm:"projects",app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL"},function(e){t.modal("hide"),zy.extend.msg("修改成功","s"),$("#widget-grid").empty(),i()},$.extend({prjid:f.prjid,action:"update"},t.find("form").form2json()))}),t.modal("show")})}),n.find('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t,a,i=$(e.target).closest("li");1==i.index()&&(0===(t=n.find("#apilist").attr("id","apilist"+f.prjid)).children().length&&h(t,{name:"appnm",title:"showid"},null,f,function(a){n.find("#up").unbind("click").click(function(e){var t=$(this);zy.net.loadHTML(r,$("#modal_container"),function(){$("#modal_container").find(".modal").modal("show"),d(t.attr("id"),$("#modal_container"),a)})}),n.find("#down").unbind("click").click(function(e){var t=$(this);zy.net.loadHTML(r,$("#modal_container"),function(){$("#modal_container").find(".modal").modal("show"),d(t.attr("id"),$("#modal_container"),a)})}),n.find("#redit").unbind("click").click(function(e){var t=$(this);zy.net.loadHTML(r,$("#modal_container"),function(){$("#modal_container").find(".modal").modal("show"),d(t.attr("id"),$("#modal_container"),a)})})})),2==i.index()&&function(){if(!rbac_prj_mgt07_cache[f.prjid]){var e=n.find("#prj_menu").attr("id","prj_menu"+f.prjid);zy.net.loadHTML(o+"?prjid="+f.prjid,e)}}(),3==i.index()&&function(){if(!rbac_prj_mgt11_cache[f.prjid]){var e=n.find("#prj_page").attr("id","prj_page"+f.prjid);zy.net.loadHTML(c+"?prjid="+f.prjid,e)}}(),4==i.index()&&(0===(a=n.find("#rolegroup").attr("id","rolegroup"+f.prjid)).children().length&&zy.extend.get({apinm:"prjugusers",mod:"XMGL",app:"03229cbe4f4f11e48d6d6f51497a883b"},function(e){h(a,{name:"de0201039",title:"userid"},e.result,f)},{ugid:f.ugid}))}),n.find("[name=prjid]").val(f.prjid),function(){zy.cache.initDicts("ZR.0030",function(){n.find("[name=apizt]").each(function(){$(this).zySelect("ZR.0030",!1,{width:"100%"})})}),n.find(".table-responsive").attr("id","table-responsive"+f.prjid),n.find("#prj_api_history_pagination").attr("id","pagination"+f.prjid);var e=new Date;n.find("[name=dtstart]").datetimepicker({language:"zh-CN",format:"yyyy-mm-dd hh:ii:ss",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1}).datetimepicker("setDate",new Date(e.getFullYear(),e.getMonth()-1,e.getDate())),n.find("[name=dtend]").datetimepicker({language:"zh-CN",format:"yyyy-mm-dd hh:ii:ss",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1}).datetimepicker("setDate",e),n.find("#tab-r6-query").unbind().bind("click",function(){var e,t,i;e=1,t=n.find("#rbac_prj_mgt02r6_form"),i=n.find("[name=prj_api_history_table]"),$.jqPaginator("#pagination"+f.prjid,{totalCounts:1,pageSize:10,currentPage:e,onPageChange:function(a){zy.g.am.app="03229cbe4f4f11e48d6d6f51497a883b",zy.g.am.mod="yyxxgl",zy.g.am.prjid=f.prjid,zy.g.am.pagesize=10,zy.net.get("api/api_history_list",function(e){if(e){var t={data:e.result,columns:[{title:"app名称",data:"appnm"},{title:"模块名称",data:"modnm"},{title:"api名称",data:"apinm"},{title:"操作类型",render:function(e,t,a,i){return zy.cache.cd2name("ZR.0030",a.stability)}},{title:"平台用户ID",data:"userid"},{title:"修改时间",data:"updatedt"}]};$.extend(t,zy.ui.dataTable),i.dataTable(t),n.find(".dataTables_scroll").css("clear","none"),0<=e.count?(n.find("[name=total_count]").html("总数："+e.count),n.find("#pagination"+f.prjid).jqPaginator("option",{totalCounts:e.count,pageSize:10,currentPage:a})):n.find("#pagination"+f.prjid).jqPaginator("destroy")}},t.serialize(),a)}})})}()}function a(e){if($.isArray(e)){var i=zy.extend.async(e.length)(function(e){var t=$("#widget-grid");t.jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"重置设置?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"重置位置?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!1,deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){rbac_prj_mgt11_cache&&$.each(rbac_prj_mgt11_cache,function(e,t){var a=t.v.dt.DataTable().row(".active").index();t.DataTable(t.v.dt.DataTable().rows({page:"current"}).data()),t.v.dt.DataTable().rows(a).nodes().to$().trigger("click")})},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){alert("你好, 这是一个自定义按钮...")},customEnd:function(){alert("下次再会...")},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"更新时间: %y%/%m%/%d% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"对不起有一个错误:",labelUpdated:"最新更新:",labelRefresh:"刷新",labelDelete:"删除 widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:$.navAsAjax})});$.each(e,function(e,t){var o,a,n;o=t,a=i,n=$("#widget-grid"),function(i){var d=n.children();if(0===d.length){var e=$("<div>").addClass("row");n.append(e),d=n.children()}var r=$("<article>").addClass("col-xs-12 col-sm-12 col-md-12 col-lg-12");zy.net.loadHTML(l,r,function(){var e,t,a,n;d.append(r),(e=r).find("#projectName").html(o.prjnm),e.find("#projectDe").html(""===o.mark?"<br>":o.mark),e.find("#createdt").html(o.createdt.replace(/\.0/g,"")),t=r.find(".tabs-left"),a=t.children("ul"),n=t.children("div").children(),a.children().each(function(e){var t=$(this).find("a"),a=$(n[e]),i=zy.extend.random();t.attr("href","#"+i),a.attr("id",i)}),p(r.find(".jarviswidget"),o),i&&i(r)})}(function(e){var t=e.find("header:has(h2)");t.children("h2").text(o.prjnm),a&&a(o.roleid,o)})})}}function h(a,e,t,l,i){var c=null;function n(e,i,t){var n=!0;void 0!==t&&(n=t),zy.extend.get({mod:"XMGL",app:"03229cbe4f4f11e48d6d6f51497a883b",apinm:"prjapis"},function(e){var t,a=e;a.value&&(n&&(t=a.value,$.each(t,function(e,t){t.isParent=!0})),i&&i(a.value))},{id:e,prjid:l.prjid})}function d(){return{view:{showTitle:!0,selectedMulti:!1,showIcon:!0,dblClickExpand:!1,addHoverDom:function(e,a){var t=$("#"+a.tId).closest("div.tab-pane").index(),i=$("#"+a.tId+"_span");if(!(a.editNameFlag||0<$("#addBtn_"+a.tId).length||0<$("#editBtn_"+a.tId).length||0<$("#remBtn_"+a.tId).length)){var n="<span class='button add' id='addBtn_"+a.tId+"' title='添加' onfocus='this.blur();'></span>",d="<span class='button edit' id='editBtn_"+a.tId+"' title='修改' onfocus='this.blur();'></span>",r="<span class='button remove' id='remBtn_"+a.tId+"' title='删除' onfocus='this.blur();'></span>";1==t?(a.isParent&&i.after(n),0!=a.level&&i.after(d),1!=a.level&&2!=a.level||a.children||i.after(r),$("#addBtn_"+a.tId).bind("click",function(){var n;return c.selectNode(a),n=a,zy.net.loadHTML(u,$("#modal_container"),function(){var e=p(n,!1),t=$("#ide_edit .modal-title");t.html("新增");var a=$("#ide_edit .modal-body");a.empty(),s($("#ide_edit .modal-body"),m[e].add),$("#ide_edit").modal("show"),o($("#ide_edit").find("form"),n,!1);var i=$("<textarea>").attr("style","display:none").attr("name","help_info");a.find("fieldset").append(i),"api"==e&&api_help.button(a.find("fieldset"),$("#modal_container2"),a.find("textarea"),n)}),!1}),$("#remBtn_"+a.tId).bind("click",function(){var e="";1==a.level?e="prjappmaint":2==a.level&&(e="prjmodmaint"),zy.ui.mask("提示","确定删除?",function(){zy.extend.get({apinm:e,app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL"},function(e){zy.extend.msg("删除成功","s"),c.removeNode(a)},{type:"2",appid:a.appid,moduleid:a.moduleid,prjid:l.prjid},function(e){zy.extend.msg(e.msg,"w")})},function(){})}),$("#editBtn_"+a.tId).bind("click",function(){var i;return c.selectNode(a),i=a,zy.net.loadHTML(u,$("#modal_container"),function(){var e=p(i,!0),t=$("#ide_edit .modal-title");t.html("修改");var a=$("#ide_edit .modal-body");a.empty(),s($("#ide_edit .modal-body"),m[e].edit),$("#ide_edit").modal("show"),o($("#ide_edit").find("form"),i,!0),"api"==e&&api_help.button(a.find("fieldset"),$("#modal_container2"),$(a.find("textarea")[0]),i)}),!1})):4==t&&(a.isParent&&i.after(n),0!==a.level&&i.after(r),$("#addBtn_"+a.tId).bind("click",function(){var t;return c.selectNode(a),t=a,zy.net.loadHTML(f,$("#modal_container"),function(){$("#modal_container").find(".modal").modal("show");var e=$("#modal_container");e.find("#confirm_btn").btnDisable(!0);var n=$("#search_user_dt");function a(e){var t=[{data:"userid"},{data:"de0201039"},{render:function(e,t,a,i){return zy.cache.cd2name("GBT.2261.1",a.de0201040)}},{data:"de0201010"},{data:"de0201012"}],a={data:e,columns:t};$.extend(a,zy.ui.dataTable),n.dataTable(a),$(".dataTables_scrollHeadInner").css("width","100%"),$(".dataTables_scrollBody table").css("width","100%"),$(".dataTables_scrollHeadInner table").css("width","100%")}zy.cache.initDicts("GBT.2261.1",function(){$("#search_user_form input[name=de0201040]").zySelect("GBT.2261.1",!0,{allowClear:!1,width:"100%"})}),a(),n.on("click","tr",function(e){if($(this).find("th").is("th")||$(this).find("td").hasClass("dataTables_empty"))return!1;!$(this).find("div").hasClass("popover")&&$(this).hasClass("active")?($(this).removeClass("active"),$("#confirm_btn").btnDisable(!0)):($(this).addClass("active"),$("#confirm_btn").btnDisable(!1))}),$("#close_btn").click(function(){$("#search_user").modal("hide")}),$("#search_btn").click(function(){var e;conditions=$("#search_user_form").serialize(),$(".dataTables_wrapper").removeAttr("style"),$("#confirm_btn").btnDisable(!0),$("#search_btn").button("loading"),e=1,$.jqPaginator("#search_user_pagination",{totalCounts:1,pageSize:5,currentPage:e,onPageChange:function(e){var t;t=e,zy.g.am.pagesize=5,zy.g.am.app="d2c8511b47714faba5c71506a5029d94",zy.g.am.mod="personalinfo",zy.net.get("api/personalselect2",function(e){$("#search_btn").button("reset"),e&&($("#confirm_btn").btnDisable(!0),a(e.result),0<e.count&&0<e.result.length?$("#search_user_pagination").jqPaginator("option",{totalCounts:e.count,pageSize:5,currentPage:t}):$("#search_user_pagination").jqPaginator("destroy"))},$("#search_user_form").form2json(),t,function(e){zy.extend.msg("选择的用户已在项目中","i")})}})}),$("#confirm_btn").click(function(){var i=[];e.find("tr.active").each(function(e){var t=$(this),a=n.DataTable().row(t).data();i.push(a.userid)}),zy.extend.get({app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL",apinm:"prjuserop"},function(e){$("#search_user").modal("hide"),c.addNodes(t,e.result),zy.extend.msg("添加成功","s")},{action:"add",ugid:l.ugid,userid:i.join(",")})}),$("#cancel_btn").click(function(){$("#search_user").modal("hide")})}),!1}),$("#remBtn_"+a.tId).bind("click",function(){zy.ui.mask("提示","确定要将 "+a.de0201039+" 移出项目?",function(){zy.extend.get({apinm:"prjuserop",app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL"},function(e){zy.extend.msg("删除成功","s"),c.removeNode(a)},{action:"delete",userid:a.userid,ugid:l.ugid},function(e){zy.extend.msg(e.msg,"w")})},function(){})}))}},removeHoverDom:function(e,t){$("#addBtn_"+t.tId).unbind().remove(),$("#editBtn_"+t.tId).unbind().remove(),$("#remBtn_"+t.tId).unbind().remove()}},data:{key:e,simpleData:{enable:!1}},callback:{onExpand:function(e,t,a){var i=!a.moduleid;a.children||n(a.someid,function(e){var t=e;a.contentid&&$.each(t,function(e,t){t.appnm=t.appnm.replace(/(.0)$/g,"")}),a.children=t,c.refresh()},i)}}}}function p(e,t){return e.appid?e.moduleid?e.apiid&&e.contentid?"prjapimaint":e.moduleid&&!e.apiid?t?"prjmodmaint":"prjapimaint":e.apiid&&e.hisid?"prjhismaint":void 0:t?"prjappmaint":"prjmodmaint":"prjappmaint"}function o(r,o,e){var i=r;if(e)if(o.isParent)$.each(o,function(e,t){var a=i.find("[name="+e+"]");0<a.length&&(a.hasClass("select2-offscreen")?a.select2("val",t):a.val(t.replace(/\.0/g,"")))});else{var t={appid:o.appid,moduleid:o.moduleid,apiid:o.apiid};zy.g.am.app="ZYAPP_IDE",zy.g.am.mod="ZYMODULE_IDE",zy.net.get("api/getapiinfo",function(e){$.each(e.result[0],function(e,t){var a=i.find("[name="+e+"]");0<a.length&&(a.hasClass("select2-offscreen")?a.select2("val",t):a.val(t.replace(/\.0/g,"")))})},t,null,function(e){zy.log(e)})}i.find("[name=ide_submit]").unbind().click(function(){if(a=!0,r.children().find("input").each(function(e,t){if($(t).attr("name")&&"updatedt"!==$(t).attr("name")&&"createdt"!==$(t).attr("name")&&""===$(t).val())return zy.ui.msg("提示",$(t).attr("placeholder")+"不可为空","w"),a=!1}),a){var a,e,i,t,n="修改"===$(this).closest(".modal-content").find("h4").text()?1:0,d={type:n,prjid:l.prjid};o.appid&&(d.appid=o.appid),o.moduleid&&(d.moduleid=o.moduleid),zy.extend.post({apinm:p(o,Boolean(n)),mod:"XMGL",app:"03229cbe4f4f11e48d6d6f51497a883b"},function(e){Boolean(n)?($.extend(!0,o,e.result[0]),c.refresh()):c.addNodes(o,e.result[0]),zy.ui.msg("提示信息","成功","s"),$(".modal").modal("hide")},$.extend(!0,{},d,(i={},t=(e=r).find("textarea"),e.find("input").each(function(e,t){$(t).attr("role")||(i[$(t).attr("name")]=$(t).val())}),delete i.createdt,delete i.updatedt,i[t.attr("name")]=t.val(),i)))}})}function s(e,t){var a,i,n,d,r=$.extend(!0,{},t),o=(a=r,i=[],n=[],d=[],$.each(a,function(e,t){12===t.width?n.push(t):"createdt"===t.id||"updatedt"===t.id?d.push(t):i.push(t)}),{half:i,full:n,time:d});function l(e){if(12!==e.width)var t=zy.extend.label("section").addClass("col col-"+e.width);else t=zy.extend.label("section");var a=zy.extend.label("label").addClass("label").html(e.name);if("textarea"===e.type)var i=zy.extend.label("label").addClass("textarea has-warning"),n=zy.extend.label("textarea").attr("name",e.id).attr("placeholder",e.name);else i=zy.extend.label("label").addClass("input has-warning"),n=zy.extend.label("input").attr("name",e.id).attr("type",e.type).attr("placeholder",e.name);"select2"===n.attr("type")&&n.attr("type","input"),e.write||n.attr("readonly","readonly");var d=zy.extend.label("b").addClass("tooltip tooltip-bottom-right").html(e.name+"为必填项");return i.append(n).append(d),t.append(a).append(i),t}function c(e){var t=e/2;return Math.round(t)===t}var p=zy.extend.label("form").attr("onsubmit","return false;").addClass("smart-form"),s=$("<fieldset>");p.append(s),$.each(o.half,function(e,t){var a=e/2;if(c(e)){var i=zy.extend.label("div").addClass("row");p.children().append(i)}else a-=.5;p.find("div").eq(a).append(l(t))});var m,u,f,h,b,g=null;$.each(o.time,function(e,t){c(e)&&(g=zy.extend.label("div").addClass("row")),g.append(l(t)),p.children().append(g);var a=$("<textarea>").attr("style","display:none").attr("name","help_info");s.append(a)}),$.each(o.full,function(e,t){p.children().append(l(t))}),m=p,u=zy.extend.label("footer"),f=zy.extend.label("button").addClass("btn btn-default").attr("data-dismiss","modal").html("取消"),h=zy.extend.label("button").addClass("btn btn-primary").attr("name","ide_submit").html("确定"),u.append(f).append(h),m.append(u),b=r,$.each(b,function(e,t){"status"===t.id&&zy.cache.initDicts("ZR.0001",function(){p.find("[name="+t.id+"]").zySelect("ZR.0001",!1,{allowClear:!1,width:"100%"}),p.find("[name="+t.id+"]").select2("val","1")})}),e.append(p)}if(t)return c=$.fn.zTree.init(a,d(),[{de0201039:l.prjnm,isParent:!0,children:t,open:!0}]),null;n("",function(e){var t=[{isParent:!0,appnm:l.prjnm,children:e,open:!0}];c=$.fn.zTree.init(a,d(),t)}),i&&i(a)}function i(){zy.extend.get({apinm:"projects",mod:"XMGL",app:"03229cbe4f4f11e48d6d6f51497a883b"},function(e){a(e.result)},{action:"get"})}$("#add_project").unbind("click").click(function(e){zy.net.loadHTML(t,$("#modal_container"),function(){var t=$("#modal_container").find(".modal");zy.cache.initDicts("ZR.0001",function(){var e=t.find("input[name=status]");e.zySelect("ZR.0001",!1,{allowClear:!1,width:"100%"}),e.select2("val","1")}),t.find("[name=add]").unbind("click").click(function(e){zy.extend.get({apinm:"projects",app:"03229cbe4f4f11e48d6d6f51497a883b",mod:"XMGL"},function(e){t.modal("hide"),zy.extend.msg("添加成功","s"),$("#widget-grid").empty(),i()},$.extend(!0,{action:"add"},t.find("form").form2json()))}),t.modal("show")})}),i()}();