rbac_ms_mgt01=function(){var e,a=l.prototype;a._g={data:[],paramdata:[],param:{id:""}};$("#rbac_ms_mgt01");var o={},r={};function l(){return Console.log("new rbac_ms_mgt01(obj)"),(e=this).Init(),this}function p(e){var e=e||{key:"",desc:"",value:""},a=m(),l=$("<div>").addClass("row").attr("_index",a);$("#param").append(l);var n=$("<section>").addClass("col col-3"),t=$("<label>").addClass("label").html(e.key);n.append(t),l.append(n);var i=$("<section>").addClass("col col-5"),d=$("<label>").addClass("label").html(e.value);i.append(d),l.append(i);var p=$("<section>").addClass("col col-4"),s=$("<label>").addClass("label").html(e.desc);p.append(s),l.append(p),r[a]=[e.key,encodeURIComponent(e.value)]}function s(){var e="api",a=location.host,l="/ds/",n="",t=$("#form_help").find('[name="url"]');t.val("");var i=$.extend({},zy.g.comm,{app:o.appid,mod:o.moduleid,s:"d",ems:"ems"});delete i.orgtype,delete i.orgpath;var d="";if(o.requests=="01"){var p="&";var s=[];$.each(r,function(e,a){var l=a;s.push(l.join("="))});n=s.join("&");console.log("param = "+n);if(n!=""){if(n[n.length-1]=="&"){p=""}}else{p=""}d=zy.g.host.api+zy.fix_api_call(e+"/"+o.apiid,i)+"?"+n+p+zy.net.parseParam(i)}else{d=zy.g.host.api+zy.fix_api_call(e+"/"+o.apiid,i)+"?"+zy.net.parseParam(i)}t.val(d)}function m(){return Math.round(Math.random()*1e6)}return a.Events={},a.Init=function(){e.listTree()},a.listTree=function(){zy.extend.get({app:"apils",mod:"apihelp",apinm:"getprj"},function(e){e&&e.result&&$.fn.zTree.init($("#apilist"),{view:{selectedMulti:!1},data:{key:{name:"name",title:"mark"},simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:0}},callback:{onClick:function(e,a,t){if(0===t.flg)return o.appid=t.aid,o.moduleid=t.pid,o.apiid=t.id,zy.g.am.app="ZYAPP_IDE",zy.g.am.mod="ZYMODULE_IDE",void zy.net.get("api/getapiinfo",function(e){var n=$("#form_help");if($.each(e.result[0],function(e,a){var l=n.find("[name="+e+"]");0<l.length&&l.html(a.replace(/\.0/g,""))}),document.getElementById("form_help").style.display="block",$("#param").empty(),e.result[0].help_info){var a=JSON.parse(e.result[0].help_info);n.find('[name="api_classify"]').html(a.api_classify),o.requests=a.requests,"01"==o.requests?n.find('[name="requests"]').html("GET"):n.find('[name="requests"]').html("POST"),0<a.param.length&&$.each(a.param,function(e,a){p(a)})}else n.find('[name="api_classify"]').html(),n.find('[name="requests"]').html(),o.requests="02";s()},o,null,function(e){});var i=$.fn.zTree.getZTreeObj(a),d=i.getNodeByTId(t.tId);d.children||(zy.extend.get({app:"apils",mod:"apihelp",apinm:"getapi"},function(e){e&&e.value&&(newNode=i.addNodes(d,e.value));var a=t.name,l=a.split("{"),n=l[0]+"{"+e.value.length+"}";t.name=n,i.updateNode(t)},{id:t.id,pid:t.pid,flg:t.flg}),console.log(t.id+a+t.name))},onAsyncSuccess:function(e,a,l){console.log(a,l),$.fn.zTree.getZTreeObj(a).expandAll(!0)}}},e.result),$.fn.zTree.getZTreeObj("apilist").expandAll(!0)},{flg:0})},l}();