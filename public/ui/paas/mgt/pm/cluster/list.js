ClusterManager=function(){var a,t=o.prototype;t._g={page:1,count:1};var e=$("#log_access_log_wid"),n=$("#log_access_log_search_form"),i=$("#log_access_log_dt");function o(){return(a=this).Init(),this}function l(t,a){return t.beginAt-a.beginAt}return t.Events={},t.Init=function(){a.Select(),a.Toolbar(),a.Pagination(1)},t.DataTable=function(t,o){var a={data:t,columns:[{data:"osName",title:"操作系统"},{data:"osArch",title:"系统类型"},{data:"osVersion",title:"系统版本"},{data:"javaVendor",title:"Java 厂商"},{data:"javaVersion",title:"Java 版本"},{data:"nodeID",title:"运算节点 ID"},{title:"IP 地址",render:function(t,a,e,n){return e.ip?e.ip.join("<br/>"):""}},{data:"rpcPort",title:"RPC 端口"},{title:"开机时间",render:function(t,a,e,n){return new Date(e.startAt).toLocaleString()}},{title:"运行时长",render:function(t,a,e,n){return(o=Date.now()-e.startAt)<1e3?o.toFixed(1)+" 毫秒":(o/=1e3)<60?o.toFixed(1)+" 秒":(o/=60)<60?o.toFixed(1)+" 分":(o/=60).toFixed(1)+" 小时";var o}},{title:"状态",render:function(t,a,e,n){return o[e.nodeID]}}]};$.extend(a,zy.ui.dataTable),i.dataTable(a)},t.Toolbar=function(){n.validate({rules:{},submitHandler:function(t){$("#log_access_log_search").button("loading"),a.Pagination(1)},errorPlacement:function(t,a){t.insertAfter(a.parent())}}),i.on("click","tr",function(t){if($(this).find("th").is("th")||$(this).find("td").hasClass("dataTables_empty"))return $("#log_access_log_kill").btnDisable(!0),null,!1;$("#log_access_log_kill").btnDisable(!1),i.DataTable().$("tr.active").removeClass("active"),$(this).addClass("active"),i.DataTable().row(".active").data()})},t.Pagination=function(t){zy.log("Pagination page = "+t),$.jqPaginator("#log_access_log_pagination",{totalCounts:a._g.count,pageSize:zy.g.page.pagesize,currentPage:t,onPageChange:function(t){zy.log("onPageChange num = "+t),a.SetDt(t)}})},t.SetDt=function(t){zy.g.am.app="e0ef1b25da204227b305fd40382693e6",zy.g.am.mod="cluster",zy.net.get("api/list",function(t){$("#log_access_log_search").button("reset"),t&&(t.list.sort(l),a._g.count=t.count,e.find("[name=total_count]").text("总数："+t.list.length),a.DataTable(t.list,t.state),a._g.count=1,a._g.page=1,$("#log_access_log_pagination").jqPaginator("destroy"),pageSetUp())},$("#log_access_log_search_form").serialize(),t)},t.UpDt=function(){a.Pagination(1)},t.SetRow=function(t){},t.Select=function(){},o}();