!function(){var i=$("#std_index"),t=$("#std_modal"),n=($("#innercontent"),$("#_ztree"));function o(d){var n=[];!function n(e,t){t[e.level]=e==d?e.typenm+"("+e.typecd+")":e.typenm,e.getParentNode()&&n(e.getParentNode(),t)}(d,n),zy.log(n.join("->")),i.find("[name=std_menu_header]").find("h2").html(n.join("->"))}!function(){var c=null,n=i.find(".ztree"),e={view:{showTitle:function(n,e){return!0},dblClickExpand:!1,addHoverDom:function(n,e){var t=$("#"+e.tId+"_span");if(!(e.editNameFlag||0<$("#addBtn_"+e.tId).length||0<$("#editBtn_"+e.tId).length||0<$("#remBtn_"+e.tId).length)){var d="<span class='button add' id='addBtn_"+e.tId+"' title='添加' onfocus='this.blur();'></span>",i="<span class='button edit' id='editBtn_"+e.tId+"' title='修改' onfocus='this.blur();'></span>",o="<span class='button remove' id='remBtn_"+e.tId+"' title='删除' onfocus='this.blur();'></span>";0!=e.level&&(t.after(o),t.after(i)),t.after(d),$("#addBtn_"+e.tId).bind("click",function(){return c.selectNode(e),a("i",e),zy.log("添加",e),!1}),$("#editBtn_"+e.tId).bind("click",function(){return c.selectNode(e),a("u",e),zy.log("修改",e),!1}),$("#remBtn_"+e.tId).bind("click",function(){return c.selectNode(e),zy.ui.mask("确认删除","请确认删除！",function(){zy.extend.get({app:"faac7c3dc3844e61a8ca4bd7ab2ff096",mod:"tree",apinm:"delnode"},function(n){"0"==n.ret&&(c.removeNode(e),zy.ui.msg("提示信息：","删除成功！","s"))},{typecd:e.typecd})}),zy.log("删除",e),!1})}},removeHoverDom:function(n,e){$("#addBtn_"+e.tId).unbind().remove(),$("#editBtn_"+e.tId).unbind().remove(),$("#remBtn_"+e.tId).unbind().remove()}},data:{key:{name:"typenm",title:"typecd"},simpleData:{enable:!0,idKey:"typecd",pIdKey:"parentcd"}},callback:{onClick:function(n,e,t){zy.log(t),function(n){if(n.standard){var e=i.find("#innercontent");zy.net.loadHTML("ws/srds/m/dict_view.html",e,function(){main(n)})}}(t),o(t)},onExpand:function(n,e,t){t.children&&0!=t.children.length||d(t),o(t)}}};function a(n,e){zy.net.loadHTML("ws/srds/m/tree_node_modal.html",t,function(){std_tree_node_modal(n,e,c)})}function d(e){var n=e&&e.typecd?e.typecd:"";zy.extend.get({app:"faac7c3dc3844e61a8ca4bd7ab2ff096",mod:"tree",apinm:"getnodes"},function(n){c.addNodes(e,n.result,!1)},{typecd:n})}c=$.fn.zTree.init(n,e,[]),d(null)}(),$("#innercontent").css({"border-width":"0px 0px 0px 1px","border-style":"solid","border-left-color":"#CCC!important",background:"#F0F0F6"}),$("#nouislider").noUiSlider({range:[0,100],start:25,handles:1,connect:!0,slide:function(){zy.log("noUiSliderEvent");var n=$(this).val();if(n<10)return $("#_ztree").css({display:"none",width:"0%"}),$("#innercontent").css({display:"block",width:"100%"}),$(this).val(0),!1;$("#_ztree").css({display:"block",width:+n+"%"}),100-n<33?$("#innercontent").css({display:"none"}):$("#innercontent").css({display:"block",width:100-n+"%"})}}),$("[name=std_menu_header]").find("[name=std_menu_tree]").click(function(){n.is(":visible")?($("#nouislider").val(0),$("#_ztree").css({display:"none",width:"0%"}),$("#innercontent").css({display:"block",width:"100%"})):($("#nouislider").val(25),$("#_ztree").css({display:"block",width:"25%"}),$("#innercontent").css({display:"block",width:"75%"}))})}();